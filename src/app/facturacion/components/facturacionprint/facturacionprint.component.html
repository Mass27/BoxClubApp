<!-- TODO: ARREGLAR LA IMPRESION DE LA FACTUR, SALE EL MENU DEL LADO -->

<div *ngIf="loading" class="text-center p-4">
  <p class="text-lg font-semibold text-gray-600">Cargando factura...</p>
</div>

<div *ngIf="!loading && factura" class="print-container bg-white shadow-md rounded-lg p-6 border border-gray-300">

  <div class="flex justify-between items-center border-b pb-4 mb-6">
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Boxing Club</h1>
      <p class="text-sm text-gray-600">Barrio Subirana, El Progreso, Yoro.</p>
      <p class="text-sm text-gray-600">Teléfono: +504 1234-5678</p>
      <p class="text-sm text-gray-600">Correo: contacto&#64;empresa.com</p>
    </div>
    <div>
      <img src="assets/logo4.jpg" alt="Logo" class="h-20" />
    </div>
  </div>


  <div class="mb-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-2">Información del Cliente</h2>
    <div class="grid grid-cols-2 gap-4">
      <p><strong>Cliente:</strong> {{ factura.nombreCliente }}</p>
      <p><strong>Método de Pago:</strong> {{ factura.metodoPago }}</p>
      <p><strong>Fecha:</strong> {{ factura.fecha | date:'yyyy-MM-dd' }}</p>
      <p><strong>Número de Factura:</strong> #{{ factura.numeroFactura || 'N/A' }}</p>
    </div>
  </div>


  <div class="mb-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-2">Detalles del Plan y Producto</h2>
    <table class="w-full border-collapse border border-gray-300 text-sm">
      <thead>
        <tr class="bg-gray-100">
          <th class="border border-gray-300 p-2 text-left">Descripción</th>
          <th class="border border-gray-300 p-2 text-right">Cantidad</th>
          <th class="border border-gray-300 p-2 text-right">Precio Unitario</th>
          <th class="border border-gray-300 p-2 text-right">Total</th>
        </tr>
      </thead>
      <tbody>

        <tr *ngIf="factura.idPlan">
          <td class="border border-gray-300 p-2">{{ getPlanName(factura.idPlan || 'N/A') }}</td>
          <td class="border border-gray-300 p-2 text-right">1</td>
          <td class="border border-gray-300 p-2 text-right">L {{ factura.precioPlan || 0 }}</td>
          <td class="border border-gray-300 p-2 text-right">L {{ factura.precioPlan || 0 }}</td>
        </tr>


        <tr *ngIf="factura.idproducto">
          <td class="border border-gray-300 p-2">{{ getProdName(factura.idproducto || 'N/A') }}</td>
          <td class="border border-gray-300 p-2 text-right">{{ factura.CantidadProducto || 1 }}</td>
          <td class="border border-gray-300 p-2 text-right">L {{ factura.precioProducto || 0 }}</td>
          <td class="border border-gray-300 p-2 text-right">
            L {{ (factura.CantidadProducto || 1) * (factura.precioProducto || 0) }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>


  <div class="text-right">
    <p class="text-lg"><strong>Subtotal:</strong> L {{ factura.subtotal }}</p>
    <p class="text-lg"><strong>Descuento:</strong> {{ factura.descuento }}%</p>
    <p class="text-2xl font-bold text-gray-800 mt-4">
      <strong>Total a Pagar:</strong> L {{ factura.totalPagar }}
    </p>
  </div>

  <div class="mt-8 text-center text-sm text-gray-600 border-t pt-4">
    <p>Gracias por su compra.</p>
    <p>Esta factura fue generada electrónicamente y no requiere firma.</p>
  </div>
</div>
